
//		I) На предприятии есть БД о сотрудниках:
// 1) Ф.И.О (char 30);	2) год рождения; 
// 3) Оклад float;		4) дата устройства на работу char[11];
// 
// Программа выводит список сотрудников, стаж которых > 20 лет

#define _CRT_SECURE_NO_WARNINGS

#include<string.h>
#include<iostream>
#include<math.h>

class Worker {
private:
	char* fio;
	char born[5];
	int salary;
	char date_start[11];

public:
	Worker() {
		fio = new char[20];
		born[0] = '\0';
		salary = 0;
		date_start[0] = '\0';
	}

	Worker(int n) {
		fio = new char[n];
		born[0] = '\0';
		salary = 0;
		date_start[0] = '\0';
	}

	void setFio(char* s) { strcpy(fio, s); }
	void setBorn(char* s) { strcpy(born, s); }
	void setSalary(int a) { salary = a; }
	void setDate(char* s) { strcpy(date_start, s); }

	char* getFio() { return fio; }
	char* getBorn() { return born; }
	int getSalary() { return salary; }
	char* getDate() { return date_start; }

	void Print() {
		printf("%s %s %d %s\n", fio, born, salary, date_start);
	}

	void Scanf() {
		char inits[5];
		scanf("%s%s%s%d%s", fio, inits, born, &salary, date_start);
		strcat(fio, " ");
		strcat(fio, inits);
	}
};

int pow(int a, int b) {
	int result = 1;
	for (int i = 0; i < b; i++)	result *= a;
	return result;
}

const int THIS_YEAR = 2022;

int getExperience(char* str) {
	int j = 3, k = 6;
	int year = 0;
	while (str[k]) {
		year += pow(10, j) * (str[k] - '0');
		k++; j--;
	}
	return THIS_YEAR - year;
}



//		II) Описать Base:
//	Поля: массив Worker, текущая размерность, максимальная размерность
//	Методы:
// а) Конструкторы; б) Деструкторы; в) Создание базы из текстового файла; г) Печать базы;
// д) Добавление в базу; е) Удаление из базы; ж) Корректировка записей; з) Копирование базы;
// и) Увеличение памяти для базы;

class Base {
private:
	Worker* a;
	int n; // текущая размерность
	int max_n; // максимальная размерность
public:
	Base() {
		max_n = 100;
		a = new Worker[n];
		n = 0;
	}
	Base(int maxn) {
		max_n = maxn;
		a = new Worker[max_n];
		n = 0;
	}
	~Base() {
		delete[] a;
	}

	void setWorkerBase(Worker* a) { this->a = a; }
	void setCurrentSize(int n) { this->n = n; }
	void setMaxSize(int max_n) { this->max_n = max_n; }

	Worker* getWorkerBase() { return a; }
	int getCurrentSize() { return n; }
	int getMaxSize() { return max_n; }

	int getBaseFromFile(const char* fname) {
		FILE* f;
		if ((f = fopen(fname, "r")) == NULL) return 1;
		char* fio = new char[20];
		char born[5];
		int salary;
		char date_start[11];
		char inits[5];
		int k = 0;
		while (fscanf(f, "%s%s%s%d%s", fio, inits, born, &salary, date_start) == 5) {
			strcat(fio, " ");
			strcat(fio, inits);
			a[k].setFio(fio);
			a[k].setBorn(born);
			a[k].setSalary(salary);
			a[k].setDate(date_start);
			k++;
		}
		n = k;
		fclose(f);
		return 0;
	}
	void PrintBase() {
		for (int i = 0; i < n; i++)
			a[i].Print();
	}
};

int main() {
	/*int i;					// Worker's experience >=- 20
	Worker base[100];

	for (i = 0; i < 3; i++)
		base[i].Scanf();

	printf("-------------------------------\n");

	for (i = 0; i < 3; i++)
	{
		if (getExperience(base[i].getDate()) >= 20)
			base[i].Print();
	}*/

	Base workersBase;
	if (!workersBase.getBaseFromFile("1.txt"))
		printf("Ok\n");

}
